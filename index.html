<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="style.css">
        <title>Desafio - Software para Pizza</title>
    </head>
    <body>

        <form id="idInfosFormulario" action="" method="get">

            <div class="container1">

                <div class="box1">                    

                    <div id="AjusteDaBox1">

                        <div id="Titulo">
                            <h1>Calcular valores das pizzas</h1>
                        </div>

                        <div class="CaixaDigitacao">

                            <label for="idNomePizza">Informe o nome da pizza</label>
                            <input
                                id="idNomePizza"
                                type="text"
                                name="nmNomePizza">
                            
                        </div>

                        <div class="CaixaDigitacao">

                            <label for="idTamanho">Informe o diâmetro da pizza (em centímetros)</label>
                            <input
                                id="idTamanho"
                                type="number"
                                name="nmTamanho">
                            
                        </div>

                        <div class="CaixaDigitacao">

                            <label for="idPreco">Informe o preço em R$</label>
                            <input
                                id="idPreco"
                                type="number"
                                name="nmPreco">

                        </div>

                        <div class="CaixaDeStatus">

                            <input
                                id="idStatus"
                                name="nmStatus"
                                type="text"
                                readonly>

                        </div>

                    </div>                    

                    <div class="CaixaDeBotoes">

                        <div class="Botao">
                            <input
                                id="idBotaoGuardar"
                                type="button"
                                value="Guardar Informações"
                                onclick="guardarInformacoes()">
                        </div>

                        <div class="Botao">
                            <input
                                id="idMostrarResultado"
                                type="button"
                                value="Mostrar Informações"
                                onclick="mostrarInformacoes()">
                        </div>

                    </div>

                </div>

            </div>

<!---------------------------------------------------------------------------------------- Segunda Página ---------------------------------------------------------------------->

            <div class="container2">

                <div class="box2">

                    <div id="Titulo">
                        <h1>Calcular valores das pizzas</h1>
                    </div>

                    <div id="AjusteDaBox2">

                        <table class="tbClPizzas" id="tbIdPizzas">
                            
                            <thead id="thIdPizzas">

                                <tr class="trClPizzas">

                                    <th class="thClNomePizza">Nome</th>
                                    <th class="thClTamanhoPizza">Tam.(cm)</th>
                                    <th class="thClPrecoPizza">Preço</th>
                                    <th class="thClPrecoPCmQ">R$ p/cm²</th>
                                    <th class="thClDiferencaEmPorc">Diferença%</th>
                                    
                                </tr>

                            </thead>

                            <tbody id="tboIdLinha">

                                <tr class="trClPizzaUsuario">

                                </tr>

                            </tbody>
                             
                        </table>
                        
                    </div>
                </div>

            </div>


        </form>

        <script>

            //--------------------------------------------------------------- \\ Declaração de variáveis // ---------------------------------------------------------------\\
            
            var pizzas = [];
            var formulario = document.querySelector("#idInfosFormulario")
            var preco = Number(document.getElementById("idPreco").value);
            var precoPCm2, raio, area = 0;
            var contLinha = 0;

            //------------------------------------------------------------ \\ Função para inicializar o programa // --------------------------------------------------------\\

            iniciar();

            //-------------------------------------------- \\ Função para alimentar as arrays com informações do usuário // -------------------------------------------------\\

            botaoGuardar.onclick = function() {

                let isTelaValida = consistirTela();

                if (isTelaValida) {

                    pesquisarPizza();

                }

                //Criar nova linha para a tabela 
                //var pizzasAdLinha = adicionaLinha()

                //Adicionar a linha na tabela 
                //var corpoTabela = document.getElementById("tboIdLinha")
                //corpoTabela.appendChild(pizzasAdLinha)

                //resetar formulario
                formulario.reset()
                organizarTabela()

            }

            //--------------------------------------------------------------- \\ Funções para cadastrar informações // ------------------------------------------------------\\

            //Extraindo dados do Formulário através do name

            function pesquisarPizza(pizza) {

                var pizza = [];

                calcularPrecoPCm2(precoPCm2);

                    pizza[0] = formulario.nmNomePizza.value;
                    pizza[1] = formulario.nmTamanho.value;
                    pizza[2] = formulario.nmPreco.value;
                    pizza[3] = Number(precoPCm2.toFixed(2));
                    pizza[4] = 0;

                    pizzas.push(pizza);
                    console.log(pizzas)

            }

            //--------------------------------------------------- \\ Funções de controle de labels e caixas de digitação // -------------------------------------------------\\

            function travarCaixas(){

                document.getElementById("idBotaoGuardar").disabled = true; //Desativa o botão de guardar, quando forem guardados 30 números na array.
                document.getElementById("idNomePizza").disabled = true; //Desativa o botão de guardar, quando forem guardados 30 números na array.
                document.getElementById("idTamanho").disabled = true; //Desativa o botão de guardar, quando forem guardados 30 números na array.
                document.getElementById("idPreco").disabled = true; //Desativa o botão de guardar, quando forem guardados 30 números na array.
                
            }

            //------------------------------------------------------------- \\ Função rotina para inicialização // ---------------------------------------------------------\\

            function iniciar(){

                botaoGuardar = document.getElementById("idBotaoGuardar");
                botaoMostrar = document.getElementById("idMostrarResultado");
                aviso = document.getElementById("idStatus");

            }

            //--------------------------------------------------------- \\ Função para verificar valores inseridos // ---------------------------------------------------------\\

            function consistirTela(){

                let nome = document.getElementById("idNomePizza").value;
                let tamanho = document.getElementById("idTamanho").value;
                let preco = Number(document.getElementById("idPreco").value);

                if (nome == "" || nome == " ") {

                    aviso.value = "Preenchimento inválido: Campo Nome";
                    aviso.classList.add("alerta");
                    document.getElementById("idNomePizza").focus();                  
                    return false;

                }

                if (tamanho == "" || tamanho == " ") {

                    aviso.value = "Preenchimento inválido: Campo tamanho";
                    aviso.classList.add("alerta");
                    document.getElementById("idTamanho").focus();
                    return false;

                }

                if (preco == "" || preco == " ") {

                    aviso.value = "Preenchimento inválido: Campo preco";
                    aviso.classList.add("alerta");
                    document.getElementById("idPreco").focus();
                    return false;

                }

                aviso.classList.remove("alerta");
                return true;

            }

            //---------------------------------------------------------- \\ Função para calcular preço por tamanho //-----------------=----------------------------------------\\

            function calcularPrecoPCm2(){

                let raio = 0;
                let diametro = Number(document.getElementById("idTamanho").value);
                let area = 0;
                let preco = Number(document.getElementById("idPreco").value);

                raio = diametro / 2;

                area = Math.PI * (raio ** 2);

                precoPCm2 = preco / area;

            }

            //---------------------------------------------------- \\ Funções para adicionar linhas e colunas // --------------------------------------------------------------\\

            function organizarTabela(){

                pizzas.sort(function(a, b){

                    if (a[3] > b[3]) {
                        return 1
                    }

                    if (a[3] < b[3]) {
                        return -1
                    }

                    return 0
                        
                })

            }

            //---------------------------------------------------- \\ Funções para adicionar linhas e colunas // --------------------------------------------------------------\\

            botaoMostrar.onclick = function(){

                //Criar nova linha para a tabela 
                var pizzasAdLinha = adicionaLinha()

                //Adicionar a linha na tabela 
                var corpoTabela = document.getElementById("tboIdLinha")
                corpoTabela.appendChild(pizzasAdLinha)


            }


            //---------------------------------------------------- \\ Funções para adicionar linhas e colunas // --------------------------------------------------------------\\
            //Cria uma linha (um tr)
            function adicionaLinha(pizza){
                
                let pizzasAdLinha = document.createElement("tr")

                for (let i = 0; i < pizzas.length; i++) {
                
                        pizzasAdLinha.classList.add("trClPizzaUsuario")
                        pizzasAdLinha.appendChild(adicionaColuna(pizzas[i][0], "tdClNomePizza")) 
                        pizzasAdLinha.appendChild(adicionaColuna(pizzas[i][1], "tdClTamanhoPizza"))   
                        pizzasAdLinha.appendChild(adicionaColuna(pizzas[i][2], "tdClPrecoPizza"))   
                        pizzasAdLinha.appendChild(adicionaColuna(pizzas[i][3], "tdClPrecoPCmQ"))   
                        pizzasAdLinha.appendChild(adicionaColuna(pizzas[i][4], "tdClDiferencaEmPorc"))

                        return pizzasAdLinha;

                }
            }

            //Cria uma coluna (um td)
            function adicionaColuna(dado, classe) {

                let pizzasAdColuna = document.createElement("td")
                pizzasAdColuna.textContent = dado
                pizzasAdColuna.classList.add(classe)
                
                return pizzasAdColuna

            }

        </script>
    </body>
</html>